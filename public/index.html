<!-- Frontend code (HTML) -->
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>CV Generator</title>
    <style>
        /* Add your CSS styles for the CV here */
    </style>
</head>
<body>
    <h1>CV Generator</h1>
    <form id="cvForm">
        <label for="name">Name:</label>
        <input type="text" id="name" name="name" required><br>
        <label for="email">Email:</label>
        <input type="email" id="email" name="email" required><br>
        <label for="skills">Skills:</label>
        <textarea id="skills" name="skills" required></textarea><br>
        <button type="submit">Generate CV</button>
    </form>

    <script>
        // Frontend code (JavaScript)
        const cvForm = document.getElementById('cvForm');

        cvForm.addEventListener('submit', async (event) => {
            event.preventDefault();

            const formData = new FormData(cvForm);
            const data = {
                name: formData.get('name'),
                email: formData.get('email'),
                skills: formData.get('skills').split('\n')
            };

            // Send a POST request to the backend to generate the PDF CV
            console.log('Data:', data); // Add this line to log the data object
const response = await fetch('http://localhost:4000/api/cv/generate-cv', {
    method: 'POST',
    headers: {
        'Content-Type': 'application/json'
    },
    body: JSON.stringify(data)
});


            // Check if the request was successful
            if (response.ok) {
                // Convert the response to a blob and create a URL
                const blob = await response.blob();
                const url = URL.createObjectURL(blob);

                // Create a link element to trigger the download
                const link = document.createElement('a');
                link.href = url;
                link.download = 'cv.pdf';
                document.body.appendChild(link);

                // Click the link to start the download
                link.click();

                // Remove the link element
                document.body.removeChild(link);
            } else {
                // Handle errors
                console.error('Failed to generate CV:', response.statusText);
            }
        });
    </script>
</body>
</html>
